# ADR-015: GUI設計方針 - メーラー型発注・納品インターフェース

## 1. コンセプト
ユーザーが「絵ジェント」に対してプロンプトをメールで送り、エージェントが「納品」として画像を返信するという、業務フローを模したGUI。
タイムライン形式（スレッド形式）で、発注（Request）と納品（Delivery）の履歴を可視化する。

## 2. インターフェース構成
- **Inbox (発注一覧)**: 送信したプロンプト（メール）の履歴。
- **Thread View**: 特定の発注に対するやり取りのタイムライン。
  - ユーザー：プロンプト送信（発注）
  - エージェント：生成プロセス開始（受領）
  - エージェント：画像・音声生成完了（納品）
- **Preview Pane**: 納品された画像や音声（WAV）をその場で確認・再生。

## 3. データ構造 (疑似メール)
`data/mailbox/` ディレクトリに JSON 形式で保存。
```json
{
  "id": "order_20240713_001",
  "timestamp": "2024-07-13T12:00:00",
  "subject": "【発注】風景画の作成依頼",
  "from": "user@example.com",
  "to": "agent@snsw.ai",
  "body": "プロンプト: 富士山と桜の美しい風景",
  "status": "delivered",
  "artifacts": {
    "image": "image_outputs/gen-image-20240713.png",
    "audio": "tts_outputs/xtts-audio-001.wav"
  }
}
```

## 4. 技術選定 (予定)
- **Backend**: Python (FastAPI / Flask)
- **Frontend**: Gradio (迅速なプロトタイピング) または Streamlit
- **Communication**: 疑似メーラーエージェントがファイルシステムを監視し、新しいJSON（メール）があれば処理を開始。

## 5. メリット
- プロンプトの試行錯誤が「スレッド」として残るため、過去の成功例を振り返りやすい。
- 「発注」というプロセスにすることで、生成待ち時間を業務フローの一部として許容できる。
